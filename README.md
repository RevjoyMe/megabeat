# MegaBeat üéµ - On-Chain Rhythm Game –Ω–∞ MegaETH

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**MegaBeat** ‚Äî —ç—Ç–æ –ø–µ—Ä–≤–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é on-chain —Ä–∏—Ç–º-–∏–≥—Ä–∞ (–∫–∞–∫ Guitar Hero), –≥–¥–µ —Ç–æ—á–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ **–±–ª–æ–∫—á–µ–π–Ω-–±–ª–æ–∫–æ–≤**. "–ù–æ—Ç—ã" –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –Ω–æ–º–µ—Ä–∞–º –º–∏–Ω–∏-–±–ª–æ–∫–æ–≤ MegaETH (—Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 10 –º—Å). –ò–≥—Ä–æ–∫ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é "Hit" —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–æ–ø–∞–ª–∞ –∏–º–µ–Ω–Ω–æ –≤ —Ç–æ—Ç –±–ª–æ–∫. –û—á–∫–∏ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç—å: Perfect (100), Good (50), Miss (0).

## üöÄ –ü–æ—á–µ–º—É MegaETH?

–¢–æ–ª—å–∫–æ **10ms –±–ª–æ–∫–∏** –¥–∞—é—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Å—É–¥–µ–π—Å—Ç–≤–∞ —Ä–∏—Ç–º-–∏–≥—Ä—ã. –ù–∞ Ethereum (12 —Å–µ–∫) —ç—Ç–æ –±—ã–ª–æ –±—ã –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ ‚Äî —ç—Ç–æ –∫–∞–∫ –∏–≥—Ä–∞—Ç—å –≤ Guitar Hero —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –≤ 12 —Å–µ–∫—É–Ω–¥!

## üìù Deployed Contract

- **Contract Name**: MegaBeatGame
- **Address**: `0xF9e9b5301ECC46E3d74452a8482923cc446C4886`
- **Network**: MegaETH Testnet
- **Explorer**: https://megaexplorer.xyz/address/0xF9e9b5301ECC46E3d74452a8482923cc446C4886

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Smart Contract (MegaBeatGame.sol)

**–ö–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```solidity
struct Song {
    string name;
    uint64[] noteBlocks;  // –ù–æ–º–µ—Ä–∞ –±–ª–æ–∫–æ–≤ –¥–ª—è –Ω–æ—Ç
    uint256 entryFee;
}

struct GameSession {
    address player;
    uint256 songId;
    uint64 startBlock;
    uint256 score;
    uint256 currentNoteIndex;
    bool active;
}
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `startGame(uint256 songId)` - –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É (–ø–ª–∞—Ç–Ω—ã–π –≤—Ö–æ–¥)
- `hitNote(uint256 noteIndex)` - –Ω–∞–∂–∞—Ç—å –Ω–æ—Ç—É (–∫–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!)
- `getGame(address player)` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–µ (view)

**–õ–æ–≥–∏–∫–∞ Scoring:**
```solidity
if (block.number == targetBlock) ‚Üí Perfect! (100 –æ—á–∫–æ–≤)
else if (block.number == targetBlock ¬± 1) ‚Üí Good! (50 –æ—á–∫–æ–≤)
else ‚Üí Miss! (0 –æ—á–∫–æ–≤)
```

**–°–æ–±—ã—Ç–∏—è:**
- `GameStarted` - –∏–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å
- `NoteHit` - –Ω–æ—Ç–∞ –Ω–∞–∂–∞—Ç–∞ (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—á–∫–æ–≤)
- `NoteMiss` - –ø—Ä–æ–º–∞—Ö
- `GameFinished` - –∏–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üíª Tech Stack

- **Smart Contracts**: Solidity 0.8.20, Hardhat, OpenZeppelin
- **Frontend** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è): React + Vite, Pixi.js (–¥–ª—è game canvas), TypeScript, wagmi, viem
- **Blockchain**: MegaETH (10ms blocks = –∏–¥–µ–∞–ª—å–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∏—Ç–º-–∏–≥—Ä—ã!)

## üéÆ User Flow

### 1. –í—ã–±–æ—Ä –ü–µ—Å–Ω–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω
- –ö–∞–∂–¥–∞—è –ø–µ—Å–Ω—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ä–µ–∫–æ—Ä–¥, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –ø–ª–∞—Ç–∞ –∑–∞ –≤—Ö–æ–¥ (0.001 ETH)
- –ù–∞–∂–∏–º–∞–µ—Ç "Play"

### 2. –ù–∞—á–∞–ª–æ –ò–≥—Ä—ã
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: "Ready? Press Start!"
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç `startGame()` —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ `GameStarted` —á–µ—Ä–µ–∑ **Realtime API**
- –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç: "3... 2... 1... GO!"

### 3. –ò–≥—Ä–æ–≤–æ–π –ü—Ä–æ—Ü–µ—Å—Å (–ö–õ–Æ–ß–ï–í–ê–Ø –ú–ï–•–ê–ù–ò–ö–ê!)

**–•—É–∫ useMegaETHBlockClock:**
```typescript
const [currentBlock, setCurrentBlock] = useState(0);

megaeth.subscribe('newMiniblocks', (block) => {
  setCurrentBlock(block.number); // –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10ms!
});
```

**–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ù–æ—Ç (GameCanvas.tsx):**
- –ö–∞–Ω–≤–∞—Å –∑–Ω–∞–µ—Ç `startBlock` –∏ `song.noteBlocks`
- –ù–æ—Ç–∞ ‚Ññ5 –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞–∂–∞—Ç–∞ –≤ –±–ª–æ–∫–µ `startBlock + song.noteBlocks[5]`
- –ù–æ—Ç–∞ "–¥–≤–∏–∂–µ—Ç—Å—è" –≤–Ω–∏–∑ –ø–æ "–¥–æ—Ä–æ–∂–∫–µ"
- –ö–æ–≥–¥–∞ `currentBlock` –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ `targetBlock`, –Ω–æ—Ç–∞ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ "–ª–∏–Ω–∏–∏ –Ω–∞–∂–∞—Ç–∏—è"

**–ù–∞–∂–∞—Ç–∏–µ (User Action):**
- –ò–≥—Ä–æ–∫ –Ω–∞–∂–∏–º–∞–µ—Ç –ü—Ä–æ–±–µ–ª
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é:
  ```typescript
  writeContract({ 
    functionName: 'hitNote', 
    args: [currentNoteIndex] 
  });
  ```

**Feedback (Realtime API):**
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç** "Perfect" —Å—Ä–∞–∑—É (–Ω–µ–ª—å–∑—è –∑–Ω–∞—Ç—å –∑–∞—Ä–∞–Ω–µ–µ!)
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è `NoteHit` –∏ `NoteMiss`
- –ß–µ—Ä–µ–∑ ~20-50ms –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ —Å `score`
- –ù–∞ —ç–∫—Ä–∞–Ω–µ –≤—Å–ø—ã—Ö–∏–≤–∞–µ—Ç: "PERFECT! +100" –∏–ª–∏ "MISS! +0"
- –°—á–µ—Ç—á–∏–∫ –æ—á–∫–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### 4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- –ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –Ω–æ—Ç—ã ‚Üí —Å–æ–±—ã—Ç–∏–µ `GameFinished`
- –≠–∫—Ä–∞–Ω: "Your Score: 450 / 500. High Score: 480"

## üî• –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –§–∏—á–∏

1. **On-Chain Timing**: –í—Å—è –ª–æ–≥–∏–∫–∞ —Å—É–¥–µ–π—Å—Ç–≤–∞ 100% on-chain
2. **10ms Precision**: –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–π —Ä–∏—Ç–º-–∏–≥—Ä—ã
3. **Provable Scores**: –í—Å–µ —Ä–µ–∫–æ—Ä–¥—ã –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã
4. **Real-time Feedback**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ —á–µ—Ä–µ–∑ Realtime API

## üõ†Ô∏è Local Development

```bash
npm install
npm run compile
npm run deploy  # —É–∂–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ!
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [VERCEL_DEPLOYMENT.md](./VERCEL_DEPLOYMENT.md) –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel.

---

**Built with ‚ù§Ô∏è for MegaETH Hackathon**

